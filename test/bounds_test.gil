import "unops_common.gil", "binops_common.gil", "internals.gil", "cheri_purecap_compressed.gil", "cheri_purecap_uncompressed.gil", "stdlib_cap256.gil", "string_common.gil";

(* signed int ( signed int,  struct __sFILE * ) *)
proc __sputc(_c, _p) {
        tmp_0 := "i__binops_sub"(_p->_w, {{ "int32", 1i }});
        _p->_w := tmp_0;
        tmp_1 := "i__binops_cmp_geq"(_p->_w, {{ "int32", 0i }}); ? 1 : tmp_2 := "i__binops_cmp_geq"(_p->_w, _p->_lbfsize);
        tmp_3 := "i__unops_cast"("signed char", _c);
        tmp_4 := "i__unops_cast"("signed int", tmp_3);
        tmp_5 := "i__binops_cmp_neq"(tmp_4, {{ "int32", 10i }});
        tmp_6 := "i__binops_and"(tmp_2, tmp_5); ? 1 : 0
        tmp_7 := "i__unops_negb"(tmp_6);
        vtb := "i__bool_of_value"(tmp_7);
        goto [vtb] t1 s1;
    s1: skip;
        tmp$1 := _p->_p;
        tmp_8 := "i__binops_add"(_p->_p, {{ "int64", 1i }});
        _p->_p := tmp_8;
        tmp_10 := "i__unops_cast"("unsigned char", _c);
        tmp := "i__store"(tmp$1, tmp_10);
        tmp_11 := "i__load"(tmp$1, "uint8");
        tmp_12 := "i__unops_cast"("signed int", tmp_11);
        ret := tmp_12;
        return;
    t1: retval___swbuf_2 := undefined; (* signed int retval___swbuf_2; *)
        retval___swbuf_2 := "__swbuf"(_c, _p);
        ret := retval___swbuf_2;
        return;
        return
};

(* unsigned long int ( unsigned long int ) *)
proc ceil_log2(x) {
        y := undefined; (* unsigned long int y; *)
        tmp_13 := "i__binops_sub"(x, {{ "uint64", 1i }});
        tmp_14 := "i__binops_bitwiseand"(x, tmp_13);
        tmp_15 := "i__binops_cmp_eq"(tmp_14, {{ "uint64", 0i }}); ? {{ "int32", 0i }} : {{ "int32", 1i }}
        tmp_16 := "i__unops_cast"("unsigned long int", tmp_15);
        y := tmp_16;
        j := undefined; (* unsigned long int j; *)
        j := {{ "uint64", 32i }};
        i := undefined; (* unsigned long int i; *)
        i := {{ "uint64", 0i }};
    t1: tmp_17 := "i__binops_cmp_lt"(i, {{ "uint64", 6i }});
        tmp_18 := "i__unops_negb"(tmp_17);
        vtb := "i__bool_of_value"(tmp_18);
        goto [vtb] t2 s2;
    s2: skip;
        k := undefined; (* unsigned long int k; *)
        tmp_19 := "i__unops_cast"("signed long int", i);
        tmp_20 := "i__binops_cmp_geq"(tmp_19, {{ "int64", 0i }});
        assert (tmp_20 == {{ "int32", 1i }});
        tmp_21 := "i__unops_cast"("signed long int", i);
        tmp_22 := "i__binops_cmp_lt"(tmp_21, {{ "int64", 6i }});
        assert (tmp_22 == {{ "int32", 1i }});
        t[tmp_23 := "i__unops_cast"("signed long int", i);]
        tmp_24 := "i__binops_bitwiseand"(x, t[tmp_23);
        tmp_25 := "i__binops_cmp_eq"(tmp_24, {{ "uint64", 0i }}); ? {{ "uint64", 0i }} : j
        k := tmp_25;
        tmp_26 := "i__binops_add"(y, k);
        y := tmp_26;
        tmp_27 := "i__undefined_>>"(x, k);
        x := tmp_27;
        tmp_28 := "i__undefined_>>"(j, {{ "uint64", 1i }});
        j := tmp_28;
        tmp_29 := "i__binops_add"(i, {{ "uint64", 1i }});
        i := tmp_29;
        goto t1;
    t2: ret := y;
        return;
        return
};

(* unsigned long int ( unsigned long int ) *)
proc dpow(exp) {
        result := undefined; (* unsigned long int result; *)
        result := {{ "uint64", 1i }};
        i := undefined; (* unsigned long int i; *)
        i := {{ "uint64", 0i }};
    t1: tmp_30 := "i__binops_cmp_lt"(i, exp);
        tmp_31 := "i__unops_negb"(tmp_30);
        vtb := "i__bool_of_value"(tmp_31);
        goto [vtb] t2 s2;
    s2: skip;
        tmp_32 := "i__binops_mul"(result, {{ "uint64", 2i }});
        result := tmp_32;
        tmp_33 := "i__binops_add"(i, {{ "uint64", 1i }});
        i := tmp_33;
        goto t1;
    t2: skip;
        ret := result;
        return;
        return
};

(* unsigned long int ( unsigned long int ) *)
proc test_length(size) {
        tmp_34 := "i__binops_cmp_leq"(size, {{ "uint64", 16384i }});
        tmp_35 := "i__unops_negb"(tmp_34);
        vtb := "i__bool_of_value"(tmp_35);
        goto [vtb] t1 s1;
    s1: skip;
        ret := size;
        return;
    t1: x := undefined; (* unsigned long int x; *)
        retval_ceil_log2_1 := undefined; (* unsigned long int retval_ceil_log2_1; *)
        retval_ceil_log2_1 := "ceil_log2"(size);
        retval_dpow_2 := undefined; (* unsigned long int retval_dpow_2; *)
        tmp_36 := "i__binops_sub"(retval_ceil_log2_1, {{ "uint64", 12i }});
        retval_dpow_2 := "dpow"(tmp_36);
        x := retval_dpow_2;
        tmp_37 := "i__binops_cmp_neq"(x, {{ "uint64", 0i }});
        assert (tmp_37 == {{ "int32", 1i }});
        tmp_38 := "i__undefined_%"(size, x);
        tmp_39 := "i__binops_cmp_eq"(tmp_38, {{ "uint64", 0i }});
        tmp_40 := "i__unops_negb"(tmp_39);
        tmp_41 := "i__binops_cmp_neq"(x, {{ "uint64", 0i }});
        tmp_42 := "i__undefined_=>"(tmp_40, tmp_41);
        assert (tmp_42 == {{ "int32", 1i }});
        tmp_43 := "i__undefined_%"(size, x);
        tmp_44 := "i__binops_cmp_eq"(tmp_43, {{ "uint64", 0i }}); ? size : tmp_45 := "i__binops_add"(size, x);
        tmp_46 := "i__undefined_%"(size, x);
        tmp_47 := "i__binops_sub"(tmp_45, tmp_46);
        ret := tmp_47;
        return;
        return
};

(* void ( signed int, signed char *, unsigned long int ) *)
proc print(n, x, size) {
        PRINTF(tmp_48 := "i__undefined_&"("Char: %d\n"[{{ "int64", 0i }}]);
        tmp_49 := "i__unops_cast"(1i, tmp_48);, n);
        PRINTF(tmp_50 := "i__undefined_&"("address: %lu\n"[{{ "int64", 0i }}]);
        tmp_51 := "i__unops_cast"(1i, tmp_50);, tmp_52 := "i__unops_cast"("unsigned long int", x););
        retval_i__cheri_base_get_1 := undefined; (* unsigned long int retval_i__cheri_base_get_1; *)
        tmp_53 := "i__unops_cast"(1i, x);
        retval_i__cheri_base_get_1 := "i__cheri_base_get"(tmp_53);
        PRINTF(tmp_54 := "i__undefined_&"("base: %lu\n"[{{ "int64", 0i }}]);
        tmp_55 := "i__unops_cast"(1i, tmp_54);, retval_i__cheri_base_get_1);
        retval_i__cheri_length_get_2 := undefined; (* unsigned long int retval_i__cheri_length_get_2; *)
        tmp_56 := "i__unops_cast"(1i, x);
        retval_i__cheri_length_get_2 := "i__cheri_length_get"(tmp_56);
        PRINTF(tmp_57 := "i__undefined_&"("length: %lu\n"[{{ "int64", 0i }}]);
        tmp_58 := "i__unops_cast"(1i, tmp_57);, retval_i__cheri_length_get_2);
        retval_i__cheri_tag_get_3 := undefined; (* _Bool retval_i__cheri_tag_get_3; *)
        tmp_59 := "i__unops_cast"(1i, x);
        retval_i__cheri_tag_get_3 := "i__cheri_tag_get"(tmp_59);
        PRINTF(tmp_60 := "i__undefined_&"("tag: %d\n"[{{ "int64", 0i }}]);
        tmp_61 := "i__unops_cast"(1i, tmp_60);, tmp_62 := "i__unops_cast"("signed int", retval_i__cheri_tag_get_3););
        tmp_63 := "i__binops_cmp_ge"(size, {{ "uint64", 16384i }});
        tmp_64 := "i__unops_negb"(tmp_63);
        vtb := "i__bool_of_value"(tmp_64);
        goto [vtb] t1 s1;
    s1: skip;
        retval_test_length_4 := undefined; (* unsigned long int retval_test_length_4; *)
        retval_test_length_4 := "test_length"(size);
        retval_test_length_5 := undefined; (* unsigned long int retval_test_length_5; *)
        retval_test_length_5 := "test_length"(size);
        retval_i__cheri_length_get_6 := undefined; (* unsigned long int retval_i__cheri_length_get_6; *)
        tmp_65 := "i__unops_cast"(1i, x);
        retval_i__cheri_length_get_6 := "i__cheri_length_get"(tmp_65);
        PRINTF(tmp_66 := "i__undefined_&"("overapproximated size: %lu, %d\n"[{{ "int64", 0i }}]);
        tmp_67 := "i__unops_cast"(1i, tmp_66);, retval_test_length_4, tmp_68 := "i__binops_cmp_eq"(retval_test_length_5, retval_i__cheri_length_get_6););
    t1: PRINTF(tmp_69 := "i__undefined_&"("\n"[{{ "int64", 0i }}]);
        tmp_70 := "i__unops_cast"(1i, tmp_69););
        ret := undefined;
        return
};

(* signed int (  ) *)
proc main() {
        size := undefined; (* unsigned long int size; *)
        a := undefined; (* unsigned long int a; *)
        b := undefined; (* unsigned long int b; *)
        i := undefined; (* signed int i; *)
        i := {{ "int32", 0i }};
    t1: tmp_71 := "i__binops_cmp_leq"(i, {{ "int32", 63i }});
        tmp_72 := "i__unops_negb"(tmp_71);
        vtb := "i__bool_of_value"(tmp_72);
        goto [vtb] t10 s10;
    s10: skip;
        PRINTF(tmp_73 := "i__undefined_&"("\n======2^%d======\n"[{{ "int64", 0i }}]);
        tmp_74 := "i__unops_cast"(1i, tmp_73);, i);
        retval_dpow_1 := undefined; (* unsigned long int retval_dpow_1; *)
        tmp_75 := "i__unops_cast"("unsigned long int", i);
        retval_dpow_1 := "dpow"(tmp_75);
        tmp_76 := "i__binops_sub"(retval_dpow_1, {{ "uint64", 1i }});
        size := tmp_76;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_77 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_78 := "i__unops_cast"(1i, tmp_77);, size, a, b);
        tmp_79 := "i__binops_cmp_eq"(a, b);
        assert (tmp_79 == {{ "int32", 1i }});
        tmp_80 := "i__binops_cmp_eq"(a, b);
        tmp_81 := "i__unops_negb"(tmp_80);
        vtb := "i__bool_of_value"(tmp_81);
        goto [vtb] t2 s2;
    s2: skip;
    t2: tmp_82 := "i__binops_add"(size, {{ "uint64", 1i }});
        size := tmp_82;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_83 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_84 := "i__unops_cast"(1i, tmp_83);, size, a, b);
        tmp_85 := "i__binops_cmp_eq"(a, b);
        assert (tmp_85 == {{ "int32", 1i }});
        tmp_86 := "i__binops_cmp_eq"(a, b);
        tmp_87 := "i__unops_negb"(tmp_86);
        vtb := "i__bool_of_value"(tmp_87);
        goto [vtb] t3 s3;
    s3: skip;
    t3: tmp_88 := "i__binops_add"(size, {{ "uint64", 1i }});
        size := tmp_88;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_89 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_90 := "i__unops_cast"(1i, tmp_89);, size, a, b);
        tmp_91 := "i__binops_cmp_eq"(a, b);
        assert (tmp_91 == {{ "int32", 1i }});
        tmp_92 := "i__binops_cmp_eq"(a, b);
        tmp_93 := "i__unops_negb"(tmp_92);
        vtb := "i__bool_of_value"(tmp_93);
        goto [vtb] t4 s4;
    s4: skip;
    t4: tmp_94 := "i__binops_cmp_lt"(i, {{ "int32", 14i }});
        tmp_95 := "i__unops_negb"(tmp_94);
        vtb := "i__bool_of_value"(tmp_95);
        goto [vtb] t5 s5;
    s5: skip;
        goto t9;
    t5: PRINTF(tmp_96 := "i__undefined_&"("------case: 2^%d - 2^%d------\n"[{{ "int64", 0i }}]);
        tmp_97 := "i__unops_cast"(1i, tmp_96);, tmp_98 := "i__binops_add"(i, {{ "int32", 1i }});, tmp_99 := "i__binops_add"(i, {{ "int32", 1i }});
        tmp_100 := "i__binops_sub"(tmp_99, {{ "int32", 12i }}););
        retval_dpow_2 := undefined; (* unsigned long int retval_dpow_2; *)
        tmp_101 := "i__binops_add"(i, {{ "int32", 1i }});
        tmp_102 := "i__unops_cast"("unsigned long int", tmp_101);
        retval_dpow_2 := "dpow"(tmp_102);
        retval_dpow_3 := undefined; (* unsigned long int retval_dpow_3; *)
        tmp_103 := "i__binops_add"(i, {{ "int32", 1i }});
        tmp_104 := "i__binops_sub"(tmp_103, {{ "int32", 12i }});
        tmp_105 := "i__unops_cast"("unsigned long int", tmp_104);
        retval_dpow_3 := "dpow"(tmp_105);
        tmp_106 := "i__binops_sub"(retval_dpow_2, retval_dpow_3);
        tmp_107 := "i__binops_sub"(tmp_106, {{ "uint64", 1i }});
        size := tmp_107;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_108 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_109 := "i__unops_cast"(1i, tmp_108);, size, a, b);
        tmp_110 := "i__binops_cmp_eq"(a, b);
        assert (tmp_110 == {{ "int32", 1i }});
        tmp_111 := "i__binops_cmp_eq"(a, b);
        tmp_112 := "i__unops_negb"(tmp_111);
        vtb := "i__bool_of_value"(tmp_112);
        goto [vtb] t6 s6;
    s6: skip;
    t6: tmp_113 := "i__binops_add"(size, {{ "uint64", 1i }});
        size := tmp_113;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_114 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_115 := "i__unops_cast"(1i, tmp_114);, size, a, b);
        tmp_116 := "i__binops_cmp_eq"(a, b);
        assert (tmp_116 == {{ "int32", 1i }});
        tmp_117 := "i__binops_cmp_eq"(a, b);
        tmp_118 := "i__unops_negb"(tmp_117);
        vtb := "i__bool_of_value"(tmp_118);
        goto [vtb] t7 s7;
    s7: skip;
    t7: tmp_119 := "i__binops_add"(size, {{ "uint64", 1i }});
        size := tmp_119;
        a := "test_length"(size);
        b := "i__cheri_representable_length"(size);
        PRINTF(tmp_120 := "i__undefined_&"("size %lu: %lu == %lu\n"[{{ "int64", 0i }}]);
        tmp_121 := "i__unops_cast"(1i, tmp_120);, size, a, b);
        tmp_122 := "i__binops_cmp_eq"(a, b);
        assert (tmp_122 == {{ "int32", 1i }});
        tmp_123 := "i__binops_cmp_eq"(a, b);
        tmp_124 := "i__unops_negb"(tmp_123);
        vtb := "i__bool_of_value"(tmp_124);
        goto [vtb] t8 s8;
    s8: skip;
    t8: skip;
    t9: tmp_125 := "i__binops_add"(i, {{ "int32", 1i }});
        i := tmp_125;
        goto t1;
    t10: skip;
        ret := {{ "int32", 0i }};
        return;
        return
};

(* global-environment-setup *)
proc genv_init() {
        t := {{ {{ "uint64", 18446744069414584320i }}, {{ "uint64", 4294901760i }}, {{ "uint64", 65280i }}, {{ "uint64", 240i }}, {{ "uint64", 12i }}, {{ "uint64", 2i }} }};
        ret := undefined;
        return
};
